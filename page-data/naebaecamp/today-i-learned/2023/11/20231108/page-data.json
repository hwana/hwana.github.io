{"componentChunkName":"component---src-templates-blog-template-js","path":"/naebaecamp/today-i-learned/2023/11/20231108/","result":{"data":{"cur":{"id":"935aa813-e367-568d-8738-382551109861","html":"<h2 id=\"-오늘의-내용정리\" style=\"position:relative;\"><a href=\"#-%EC%98%A4%EB%8A%98%EC%9D%98-%EB%82%B4%EC%9A%A9%EC%A0%95%EB%A6%AC\" aria-label=\" 오늘의 내용정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📝 오늘의 내용정리</h2>\n<p><a href=\"https://github.com/StudySpringAlgorithm/Study_Algorithm_TeamSpring/blob/main/Kim/day8/day8.md\">알고리즘 스터디 8일차</a><br>\r\n<a href=\"https://hwana.github.io/security/authentication-authorization/\">인증과 인가</a></p>\n<h2 id=\"-오늘의-마무리\" style=\"position:relative;\"><a href=\"#-%EC%98%A4%EB%8A%98%EC%9D%98-%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\" 오늘의 마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🔚 오늘의 마무리</h2>\n<p>이번주는 강의듣는 주! 스프링 시큐리티 들어가기 전 인증과 인가, JWT에 대해서 배웠는데 내용이 머리에 쉽게 들어오지 않아 글로 따로 정리를 했다.\r\n인증과 인가는 항상 헷갈렸는데, 오늘 내용을 정리하면서 인증은 보안 프로세스의 첫 단계라는걸 알게되어서 이제 명확하게 구분이 가기 시작했다.\r\n인가는 내 마음대로 ‘관리자인가..? 아닌가..?’ 로 외우기로 했다😊 예전에 JWT를 구현하려다가 포기했던 적이 있었는데 이번에는 확실하게 이해해서 프로젝트에 적용하고싶다!!!</p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#-%EC%98%A4%EB%8A%98%EC%9D%98-%EB%82%B4%EC%9A%A9%EC%A0%95%EB%A6%AC\">📝 오늘의 내용정리</a></li>\n<li><a href=\"#-%EC%98%A4%EB%8A%98%EC%9D%98-%EB%A7%88%EB%AC%B4%EB%A6%AC\">🔚 오늘의 마무리</a></li>\n</ul>\n</div>","excerpt":"📝 오늘의 내용정리 알고리즘 스터디 8일차\r\n인증과 인가 🔚 오늘의 마무리 이번주는 강의듣는 주! 스프링 시큐리티 들어가기 전 인증과 인가, JWT에 대해서 배웠는데 내용이 머리에 쉽게 들어오지 않아 글로 따로 정리를 했다.\r\n인증과 인가는 항상 헷갈렸는데, 오늘 내용을 정리하면서 인증은 보안 프로세스의 첫 단계라는걸 알게되어서 이제 명확하게 구분이 가기 시작했다.\r\n인가는 내 마음대로 ‘관리자인가..? 아닌가..?’ 로 외우기로 했다😊 예전에 JWT를 구현하려다가 포기했던 적이 있었는데 이번에는 확실하게 이해해서 프로젝트에 적용하고싶다!!! 📝 오늘의 내용정리 🔚 오늘의 마무리","frontmatter":{"date":"November 08, 2023","title":"TIL) 보안은 어려워😯","categories":"TIL","author":"화나","emoji":"✨"},"fields":{"slug":"/naebaecamp/today-i-learned/2023/11/20231108/"}},"next":{"id":"af20787c-5b8f-5e54-9c5f-0e19d93854b2","html":"<h2 id=\"-오늘의-내용정리\" style=\"position:relative;\"><a href=\"#-%EC%98%A4%EB%8A%98%EC%9D%98-%EB%82%B4%EC%9A%A9%EC%A0%95%EB%A6%AC\" aria-label=\" 오늘의 내용정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📝 오늘의 내용정리</h2>\n<p><a href=\"https://github.com/StudySpringAlgorithm/Study_Algorithm_TeamSpring/blob/main/Kim/day7/day7.md\">알고리즘 스터디 7일차</a></p>\n<h2 id=\"공통-응답-모듈-만들기\" style=\"position:relative;\"><a href=\"#%EA%B3%B5%ED%86%B5-%EC%9D%91%EB%8B%B5-%EB%AA%A8%EB%93%88-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"공통 응답 모듈 만들기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>공통 응답 모듈 만들기</h2>\n<h3 id=\"계기\" style=\"position:relative;\"><a href=\"#%EA%B3%84%EA%B8%B0\" aria-label=\"계기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>계기</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 598px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.22222222222222%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA2UlEQVQY04WQCW7DIBBFff9Ttmkb1U0BL+AZNr8IIldRZKlP+gxixJ9lmH++Gb8+cM7hpgkRIYSAqBJj7PecMxI8WwhojJScURVUlRRTz5dSqLUyrOvK++WCtYZ5nvHBY4xhWRZabhxHQtjwzlJyorHvO89045S6hr1Wyr4jKtSUKBqJOZFr5oxm9qrj3XvP0FqV+Ki8WctyvfLrFt7GidEGPm8rk1eCZmIuj88nRRp95HZISmyykUXQyZE0YtbIbZYus2qPzfSsy8Psr8PGEf/jdX/PI7cd3gH6EdXbwRA7OgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"사진\"\n        title=\"사진\"\n        src=\"/static/8eb0ff7da1dd1e16951cc07b8e5fd86d/0c69d/exception.png\"\n        srcset=\"/static/8eb0ff7da1dd1e16951cc07b8e5fd86d/e9ff0/exception.png 180w,\n/static/8eb0ff7da1dd1e16951cc07b8e5fd86d/f21e7/exception.png 360w,\n/static/8eb0ff7da1dd1e16951cc07b8e5fd86d/0c69d/exception.png 598w\"\n        sizes=\"(max-width: 598px) 100vw, 598px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Exception이 발생했을 때 응답값을 위 이미지처럼 전달해주고 있었다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 598px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA7UlEQVQoz31Ra2vDMAz0//+N66eF0ia48Su2JT9uSCNjtKWCQ8JYdzrJJO/AVJFSwlEzxpx4F8SMfd+R0oFSitbOOYwxMecvxhgwfr1hu98QU0KIQT/HGFFrRc5ZhZgZNUW01rRJIHXvXWvJAiE1u3NYlkXVQgg4jgPWWs3ee1j7UOLsHtogMf+5ECIiUoiwUTutgZgwG6P1/mL37D+tPeMkFmEjRSGGPKf7irCusCHj6xpwuXrk2l6mehcnuZEdVGL00VGcU2w+43KL+N4SiPvH6U4h4VHLctUiO2DCkMXKksdE6+Pv4p+me7b8Az7yJRMv369gAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"사진\"\n        title=\"사진\"\n        src=\"/static/b02eea3e0db47e7e1582e87f03f080c2/0c69d/success.png\"\n        srcset=\"/static/b02eea3e0db47e7e1582e87f03f080c2/e9ff0/success.png 180w,\n/static/b02eea3e0db47e7e1582e87f03f080c2/f21e7/success.png 360w,\n/static/b02eea3e0db47e7e1582e87f03f080c2/0c69d/success.png 598w\"\n        sizes=\"(max-width: 598px) 100vw, 598px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>게시글 등록/수정/삭제에 성공했을 때는 위 이미지처럼 성공한 데이터들을 전달해주고 있었다.</p>\n<p>성공했을때도 Exception이 발생했을 때와 같은 형태로 전달해주고 싶어졌다.</p>\n<p>그래서 공통 응답  모듈을 만들기로 결심했다!</p>\n<h3 id=\"commonapiresponsejava\" style=\"position:relative;\"><a href=\"#commonapiresponsejava\" aria-label=\"commonapiresponsejava permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CommonApiResponse.java</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Getter</span>\r\n<span class=\"token annotation punctuation\">@Builder</span>\r\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CommonApiResponse</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span>\r\n\t\t<span class=\"token keyword\">private</span> <span class=\"token class-name\">HttpStatus</span> status<span class=\"token punctuation\">;</span>\r\n\t\t<span class=\"token keyword\">private</span> <span class=\"token class-name\">T</span> data<span class=\"token punctuation\">;</span>\r\n\t\t<span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> message<span class=\"token punctuation\">;</span>\r\n\t\r\n\t\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token class-name\">CommonApiResponse</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">createSuccess</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">T</span> data<span class=\"token punctuation\">,</span> <span class=\"token class-name\">StatusEnum</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n\t\t\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CommonApiResponse</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span><span class=\"token function\">getHttpStatus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\t\t<span class=\"token punctuation\">}</span>\r\n\t\r\n\t\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">CommonApiResponse</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">createWithNoData</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">StatusEnum</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n\t\t\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CommonApiResponse</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span><span class=\"token function\">getHttpStatus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\t\t<span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>상태코드와 데이터 메시지를 가지고 있는 CommonApiResponse 클래스를 생성하고 컨트롤러에서 사용을 했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CommonApiResponse</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BoardResponseDto</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> <span class=\"token function\">addBoard</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestBody</span> <span class=\"token class-name\">CreateBoardRequestDto</span> request<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n\t\t<span class=\"token class-name\">Board</span> savedBoard <span class=\"token operator\">=</span> boardService<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\t\t<span class=\"token keyword\">return</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span>CREATED<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">CommonApiResponse</span><span class=\"token punctuation\">.</span><span class=\"token function\">createSuccess</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">BoardResponseDto</span><span class=\"token punctuation\">(</span>savedBoard<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">StatusEnum</span><span class=\"token punctuation\">.</span>CREATED<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\t\t<span class=\"token comment\">//return ResponseEntity.status(HttpStatus.CREATED).body(new BoardResponseDto(savedBoard)); </span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>작성을 하고보니 <em>굳이 이렇게까지 한번 더 감싸서 값을 전달하는게 맞나..?</em> 라는 생각이 엄청나게 들었다. 뭔가 이상해서 바로 튜터님을 찾아갔다.</p>\n<p>튜터님의 피드백은</p>\n<ol>\n<li>클라이언트와 협의 후 상황에 따라 전달되는 응답값은 언제든지 달라질 수 있다.</li>\n<li>status는 ResponseEntity를 통해서 전달되고 있으니 한번 더 감싸서 전달되는게 의미가 없다.</li>\n<li>메시지는 주로 모호한 상황을 설명하기 위해서 전달하는 값인데, 현재 게시글 등록/수정/삭제의 성공은 200 상태코드를 전달하는 것만으로도 충분한 상황설명이 된다.</li>\n</ol>\n<h2 id=\"-오늘의-마무리\" style=\"position:relative;\"><a href=\"#-%EC%98%A4%EB%8A%98%EC%9D%98-%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\" 오늘의 마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🔚 오늘의 마무리</h2>\n<h3 id=\"결론--역시-굳이라는-생각이-들때는-하지마라\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0--%EC%97%AD%EC%8B%9C-%EA%B5%B3%EC%9D%B4%EB%9D%BC%EB%8A%94-%EC%83%9D%EA%B0%81%EC%9D%B4-%EB%93%A4%EB%95%8C%EB%8A%94-%ED%95%98%EC%A7%80%EB%A7%88%EB%9D%BC\" aria-label=\"결론  역시 굳이라는 생각이 들때는 하지마라 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론 : 역시 굳이..?라는 생각이 들때는 하지마라</h3>\n<p>나는 이미 전달되고 있던 상태코드를 한번 더 보내주고 싶어했고, 설명을 하지 않아도 되는 상황을 메시지로 담아서 전달하고 싶었던 것이였다😬</p>\n<p>지금 프로젝트에서는 Exception 상황만 커스텀 에러로 응답값을 처리하고, 성공하는 상황은 그대로 두는게 적절하다는 생각이 들었다! 결국 이걸 고민하느라 시간을 많이 소비했지만 의미있는 고민이였다😜</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%EC%98%A4%EB%8A%98%EC%9D%98-%EB%82%B4%EC%9A%A9%EC%A0%95%EB%A6%AC\">📝 오늘의 내용정리</a></p>\n</li>\n<li>\n<p><a href=\"#%EA%B3%B5%ED%86%B5-%EC%9D%91%EB%8B%B5-%EB%AA%A8%EB%93%88-%EB%A7%8C%EB%93%A4%EA%B8%B0\">공통 응답 모듈 만들기</a></p>\n<ul>\n<li><a href=\"#%EA%B3%84%EA%B8%B0\">계기</a></li>\n<li><a href=\"#commonapiresponsejava\">CommonApiResponse.java</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%EC%98%A4%EB%8A%98%EC%9D%98-%EB%A7%88%EB%AC%B4%EB%A6%AC\">🔚 오늘의 마무리</a></p>\n<ul>\n<li><a href=\"#%EA%B2%B0%EB%A1%A0--%EC%97%AD%EC%8B%9C-%EA%B5%B3%EC%9D%B4%EB%9D%BC%EB%8A%94-%EC%83%9D%EA%B0%81%EC%9D%B4-%EB%93%A4%EB%95%8C%EB%8A%94-%ED%95%98%EC%A7%80%EB%A7%88%EB%9D%BC\">결론 : 역시 굳이..?라는 생각이 들때는 하지마라</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"November 07, 2023","title":"TIL) 공통 응답 모듈 만들기와 삽질😇","categories":"TIL","author":"화나","emoji":"✨"},"fields":{"slug":"/naebaecamp/today-i-learned/2023/11/20231107/"}},"prev":{"id":"fe646352-7627-5027-b614-3af64b7a2922","html":"<h2 id=\"인증과-인가\" style=\"position:relative;\"><a href=\"#%EC%9D%B8%EC%A6%9D%EA%B3%BC-%EC%9D%B8%EA%B0%80\" aria-label=\"인증과 인가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>인증과 인가</h2>\n<h3 id=\"인증authentication\" style=\"position:relative;\"><a href=\"#%EC%9D%B8%EC%A6%9Dauthentication\" aria-label=\"인증authentication permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>인증(Authentication)</h3>\n<p>사용자의 신원을 검증하는 행위, 보안 프로세스에서 첫 번째 단계</p>\n<h3 id=\"인가authorization-권한부여\" style=\"position:relative;\"><a href=\"#%EC%9D%B8%EA%B0%80authorization-%EA%B6%8C%ED%95%9C%EB%B6%80%EC%97%AC\" aria-label=\"인가authorization 권한부여 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>인가(Authorization, 권한부여)</h3>\n<p>사용자에게 권한을 허용/거부하는 행위</p>\n<blockquote>\n<p>우리가 사용하는 HTTP의 특성</p>\n<ul>\n<li>비연결성 : 리소스 절약을 위해 서버는 하나의 요청에 대해서 응답을 주고 연결을 끊어버린다.</li>\n<li>무상태 : 서버는 클라이언트가 이전에 어떤 상태였는지 알지 못한다.</li>\n</ul>\n</blockquote>\n<p>🤔 그럼 연결이 되어있지 않고 상태도 안가지고 있는데 어떻게 인증과 인가를 진행하는걸까?</p>\n<h2 id=\"쿠키-세션-방식\" style=\"position:relative;\"><a href=\"#%EC%BF%A0%ED%82%A4-%EC%84%B8%EC%85%98-%EB%B0%A9%EC%8B%9D\" aria-label=\"쿠키 세션 방식 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>쿠키-세션 방식</h2>\n<p>사용자의 인증 정보가 서버의 세션 저장소에 저장되는 방식이다.</p>\n<ol>\n<li>사용자가 로그인에 성공하면 서버는 사용자의 인증 정보를 세션 저장소에 저장하고, 사용자의 정보와는 관계없는 SESSION ID를 생성하여 클라이언트에게 응답값으로 전달한다.</li>\n<li>클라이언트는 SESSION ID를 쿠키에 저장하고 앞으로의 요청마다 SESSION ID를 함께 보낸다.</li>\n<li>서버는 요청값에 있는 SESSION ID에 해당하는 세션 정보가 세션 저장소에 있다면 사용자를 인증된 사용자로 판단한다.</li>\n</ol>\n<h3 id=\"문제점\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C%EC%A0%90\" aria-label=\"문제점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제점</h3>\n<p>쿠키-세션 방식은 다중 서버 환경에서 각 서버가 개별적으로 세션 저장소를 가지는 경우에 문제가 발생할 수 도 있다.</p>\n<p>매번 같은 서버로 요청이 전달되지 않고 각 세션저장소 별로 다른 인증정보를 가지고 있기 때문에 사용자 식별이 되지 않기 때문이다.</p>\n<h3 id=\"해결방법\" style=\"position:relative;\"><a href=\"#%ED%95%B4%EA%B2%B0%EB%B0%A9%EB%B2%95\" aria-label=\"해결방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>해결방법</h3>\n<ol>\n<li>로드밸런서를 통해서 사용자를 식별하여 이전에 통신한 서버로 요청이 가도록 경로를 지정해주는 방법</li>\n<li>다중 서버의 모든 세션 저장소를 동일하게 유지하는 방법</li>\n</ol>\n<p>두번째 방식의 경우 다중 서버 환경임에도 불구하고 단일 저장소가 감당해야할 부하가 늘어난다.\r\n위와 같은 고민을 해결하려면 <strong>JWT(Json Web Token)</strong> 방식을 사용하면 된다.</p>\n<h2 id=\"jwt-기반-인증-방식\" style=\"position:relative;\"><a href=\"#jwt-%EA%B8%B0%EB%B0%98-%EC%9D%B8%EC%A6%9D-%EB%B0%A9%EC%8B%9D\" aria-label=\"jwt 기반 인증 방식 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JWT 기반 인증 방식</h2>\n<p>인증에 필요한 정보들을 서버에 저장하지 않고 암호화 시킨 토큰으로 클라이언트가 직접 들고 있는 방식</p>\n<ol>\n<li>사용자가 로그인에 성공하면 서버는 인증 정보를 암호화해서 토큰 형식으로 응답값에 담아 전달한다.</li>\n<li>클라이언트는 토큰을 저장하고 있다가 요청값에 토큰을 담아서 보낸다.</li>\n<li>서버는 토큰을 발견하면 가지고 있는 비밀키로 토큰을 해독하여 사용자 검증을 한다.</li>\n</ol>\n<p>그렇다고 무조건 JWT 인증 방식이 좋은 것은 아니다. JWT로 인증을 하게 되면 구현의 복잡도가 증가하고 비밀키 유출 시 조작도 가능하게 된다. 그럼에도 JWT를 사용하는 이유는 서버의 부담이 줄어들기 때문이다.</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EC%9D%B8%EC%A6%9D%EA%B3%BC-%EC%9D%B8%EA%B0%80\">인증과 인가</a></p>\n<ul>\n<li><a href=\"#%EC%9D%B8%EC%A6%9Dauthentication\">인증(Authentication)</a></li>\n<li><a href=\"#%EC%9D%B8%EA%B0%80authorization-%EA%B6%8C%ED%95%9C%EB%B6%80%EC%97%AC\">인가(Authorization, 권한부여)</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%BF%A0%ED%82%A4-%EC%84%B8%EC%85%98-%EB%B0%A9%EC%8B%9D\">쿠키-세션 방식</a></p>\n<ul>\n<li><a href=\"#%EB%AC%B8%EC%A0%9C%EC%A0%90\">문제점</a></li>\n<li><a href=\"#%ED%95%B4%EA%B2%B0%EB%B0%A9%EB%B2%95\">해결방법</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#jwt-%EA%B8%B0%EB%B0%98-%EC%9D%B8%EC%A6%9D-%EB%B0%A9%EC%8B%9D\">JWT 기반 인증 방식</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"November 08, 2023","title":"인증과 인가","categories":"보안","author":"화나","emoji":"🔐"},"fields":{"slug":"/security/authentication-authorization/"}},"site":{"siteMetadata":{"siteUrl":"https://www.hwana.com","comments":{"utterances":{"repo":"hwana/hwana.github.io"}}}}},"pageContext":{"slug":"/naebaecamp/today-i-learned/2023/11/20231108/","nextSlug":"/naebaecamp/today-i-learned/2023/11/20231107/","prevSlug":"/security/authentication-authorization/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}